<%- include('header.ejs') -%>

<h1><%= title %></h1>

<% if(checkin.length){ %>
<h3>Return Request</h3>
<form enctype="application/x-www-form-urlencoded" method="post" action="/admin-checkin">
    <table>
        <tr>
            <th>User</th>
            <th>Gear ID</th>
            <th>Quantity</th>
            <th>Date</th>
            <th>Destination</th>
        </tr>
        <% if(checkin.forEach) { checkin.forEach( (row) => { %>
            <tr>
                <td><%= row.user_id %></td>
                <td><%= row.gear_id %></td>
                <td><%= row.quantity %></td>
                <td><%= `${row.date_out.getMonth()+1}-${row.date_out.getDate()}-${row.date_out.getFullYear()}` %></td>
                <td><%= row.destination %></td>
                <td>
                    <input
                        type="checkbox"
                        name="<%= row.ticket_id %>"
                    >
                </td>
            </tr><% });} %>
    </table>
    <input type="submit" value="Approve Return">
    <button type="submit" formaction="admin-cancel-return-request">Cancel Return</button>
</form>
<% } %>

<% if(checkout.length){ %>
<h3>Borrow Request</h3>
<form enctype="application/x-www-form-urlencoded" method="post" action="/admin-checkout">
    <table>
        <tr>
            <th>User</th>
            <th>Gear ID</th>
            <th>Quantity</th>
            <th>Destination</th>
            <th>Select</th>
        </tr>
        <% if(checkout.forEach){ checkout.forEach( (row) => { %>
            <tr>
                <td><%= row.user_id %></td>
                <td><%= row.gear_id %></td>
                <td><%= row.quantity %></td>
                <td><%= row.destination %></td>
                <td>
                    <input
                        type="checkbox"
                        name="<%= row.ticket_id %>"
                    >
                </td>
            </tr><% });} %>
    </table>
    <input type="submit" value="Approve Borrow">
    <button type="submit" formaction="admin-cancel-borrow-request">Cancel Return</button>
</form>
<% } %>


<%- include('footer.ejs') -%>